<!doctype html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Proyecto GIS</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- OpenLayers -->
  <link rel="stylesheet" href="v10.2.1/ol/ol.css" type="text/css">
  
  <link rel="stylesheet" href="style.css?v=1" type="text/css">

  <!-- Estilos personalizados -->
  <style>
    body {
      height: 100vh;
      display: flex;
      flex-direction: column;
      background-color: #f8f9fa;
      margin: 0;
    }

    header.navbar {
      background: linear-gradient(90deg, #0d6efd, #0a58ca);
      color: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    #map-container {
      flex: 1;
      display: flex;
      height: calc(100vh - 130px);
      overflow: hidden;
    }

    #map {
      flex: 1;
      height: 100%;
    }

    /* Panel lateral */
    #sidePanel {
      width: 320px;
      background: #ffffff;
      border-left: 1px solid #dee2e6;
      overflow-y: auto;
      padding: 1rem;
      box-shadow: -3px 0 5px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s ease;
    }

    #sidePanel.hidden {
      transform: translateX(100%);
    }

    #sidePanel h3 {
      font-size: 1.1rem;
      color: #0d6efd;
      border-bottom: 1px solid #dee2e6;
      padding-bottom: 4px;
      margin-top: 1rem;
    }

    footer {
      background: #0d6efd;
      color: white;
      text-align: center;
      padding: 0.6rem 0;
      font-size: 0.9rem;
    }

    #togglePanelBtn {
	  margin-top: 30px;
      background-color: #0d6efd;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 0.4rem 0.7rem;
      cursor: pointer;
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    #togglePanelBtn:hover {
      background-color: #0b5ed7;
    }

    input[type="checkbox"],
    input[type="radio"] {
      margin-right: 6px;
    }

    #legend-panel img {
      max-width: 100%;
      height: auto;
    }
  </style>

  <script src="v10.2.1/ol/dist/ol.js" type="text/javascript"></script>
</head>

<body>
  <!-- Encabezado -->
  <header class="navbar navbar-expand-lg navbar-dark px-3">
    <h1 class="h4 mb-0">üåç Sistema de Informaci√≥n Geogr√°fica</h1>
    <div class="ms-auto">
      <span class="fw-light me-2">Desarrollado por el Grupo 6</span>
    </div>
  </header>

  <!-- Contenedor principal -->
  <div id="map-container">
    <div id="map"></div>

    <!-- Bot√≥n hamburguesa -->
    <button id="togglePanelBtn">‚ò∞</button>

    <!-- Panel lateral -->
    <aside id="sidePanel">
	  
		<!-- SECCI√ìN NUEVA: MAPAS BASE -->
		<h3>Mapa Base</h3>
		<div id="base-maps-control" style="margin-bottom: 15px;">
			<div style="margin-bottom: 5px;">
				<input type="radio" name="baseMap" id="base_osm" value="osm" checked>
				<label for="base_osm" style="cursor:pointer;">Calles (OSM)</label>
			</div>
			<div style="margin-bottom: 5px;">
				<input type="radio" name="baseMap" id="base_esri" value="esri">
				<label for="base_esri" style="cursor:pointer;">Sat√©lite (Esri)</label>
			</div>
			<div>
				<input type="radio" name="baseMap" id="base_ign" value="ign">
				<label for="base_ign" style="cursor:pointer;">IGN (Argentina)</label>
			</div>
		</div>
	
      <h3>Capas</h3>
      <div id="layers-control" class="mb-3">
	    <div><input type="checkbox" id="check_layer_actividades_agropecuarias"> <label for="check_layer_actividades_agropecuarias">Actividades Agropecuarias</label></div>
		<div><input type="checkbox" id="check_layer_actividades_economicas"> <label for="check_layer_actividades_economicas">Actividades Economicas</label></div>
		<div><input type="checkbox" id="check_layer_complejo_de_energia_ene"> <label for="check_layer_complejo_de_energia_ene">Complejo de Energia</label></div>
		<div><input type="checkbox" id="check_layer_curso_de_agua_hid"> <label for="check_layer_curso_de_agua_hid">Curso de Agua</label></div>
		<div><input type="checkbox" id="check_layer_curvas_de_nivel"> <label for="check_layer_curvas_de_nivel">Curvas de Nivel</label></div>
		<div><input type="checkbox" id="check_layer_edif_turisticos"> <label for="check_layer_edif_turisticos">Edificios de Turisticos</label></div>
		<div><input type="checkbox" id="check_layer_edif_deportes"> <label for="check_layer_edif_deportes">Edificios de Deportes</label></div>
		<div><input type="checkbox" id="check_layer_edif_educacion"> <label for="check_layer_edif_educacion">Edificios de Educaci√≥n</label></div>
		<div><input type="checkbox" id="check_layer_edif_religiosos"> <label for="check_layer_edif_religiosos">Edificios de Religiosos</label></div>
		<div><input type="checkbox" id="check_layer_edif_publicos"> <label for="check_layer_edif_publicos">Edificios de Publicos</label></div>
		<div><input type="checkbox" id="check_layer_edif_salud"> <label for="check_layer_edif_salud">Edificios de Salud</label></div>
		<div><input type="checkbox" id="check_layer_edif_seguridad"> <label for="check_layer_edif_seguridad">Edificios de Seguridad</label></div>
		<div><input type="checkbox" id="check_layer_edif_ferroviarios"> <label for="check_layer_edif_ferroviarios">Edificios de Ferroviarios</label></div>
		<div><input type="checkbox" id="check_layer_ejido"> <label for="check_layer_ejido">Ejido</label></div>
		<div><input type="checkbox" id="check_layer_espejo_de_agua_hid"> <label for="check_layer_espejo_de_agua_hid">Espejo de Agua</label></div>
		<div><input type="checkbox" id="check_layer_estructuras_portuarias"> <label for="check_layer_estructuras_portuarias">Estructuras Portuarias</label></div>
		<div><input type="checkbox" id="check_layer_infra_agro"> <label for="check_layer_infra_agro">Infraestructura Aeroportuaria</label></div>
		<div><input type="checkbox" id="check_layer_infra_hidro"> <label for="check_layer_infra_hidro">Infraestructura Hidro</label></div>
		<div><input type="checkbox" id="check_layer_isla"> <label for="check_layer_isla">Isla</label></div>
		<div><input type="checkbox" id="check_layer_limite_politico"> <label for="check_layer_limite_politico">Limite Politico Administrativo</label></div>
		<div><input type="checkbox" id="check_layer_localidades"> <label for="check_layer_localidades">Localidades</label></div>
		<div><input type="checkbox" id="check_layer_lineas_conduccion"> <label for="check_layer_lineas_conduccion">L√≠neas de Conducci√≥n</label></div>
		<div><input type="checkbox" id="check_layer_marcas_senales"> <label for="check_layer_marcas_senales">Marcas y Se√±ales</label></div>
		<div><input type="checkbox" id="check_layer_muro_embalse"> <label for="check_layer_muro_embalse">Muro Embalse</label></div>
		<div><input type="checkbox" id="check_layer_obra_portuaria"> <label for="check_layer_obra_portuaria">Obra Portuaria</label></div>
		<div><input type="checkbox" id="check_layer_obra_comunicacion"> <label for="check_layer_obra_comunicacion">Obra Comunicaci√≥n</label></div>
		<div><input type="checkbox" id="check_layer_otras_edificaciones"> <label for="check_layer_otras_edificaciones">Otras Edificaciones</label></div>
		<div><input type="checkbox" id="check_layer_pais_lim"> <label for="check_layer_pais_lim">Pais_Lim</label></div>
		<div><input type="checkbox" id="check_layer_provincias"> <label for="check_layer_provincias">Provincias</label></div>
		<div><input type="checkbox" id="check_layer_puente_red_vial"> <label for="check_layer_puente_red_vial">Punte Red Vial</label></div>
		<div><input type="checkbox" id="check_layer_puntos_alturas_topo"> <label for="check_layer_puntos_alturas_topo">Puntos Altura Topograficas</label></div>
		<div><input type="checkbox" id="check_layer_puntos_terreno"> <label for="check_layer_puntos_terreno">Puntos del Terreno</label></div>
		<div><input type="checkbox" id="check_layer_red_vial"> <label for="check_layer_red_vial">Red Vial</label></div>
		<div><input type="checkbox" id="check_layer_red_ferroviaria"> <label for="check_layer_red_ferroviaria">Red Ferrioviaria</label></div>
		<div><input type="checkbox" id="check_layer_salvado_de_obstaculo"> <label for="check_layer_salvado_de_obstaculo">Salvado de Obstaculo</label></div>
		<div><input type="checkbox" id="check_layer_senalizaciones"> <label for="check_layer_senalizaciones">Se√±alizaciones</label></div>
		<div><input type="checkbox" id="check_layer_sue_costero"> <label for="check_layer_sue_costero">Sue Costero</label></div>
		<div><input type="checkbox" id="check_layer_sue_hidromorfologico"> <label for="check_layer_sue_hidromorfologico">Sue Hidromorfologico</label></div>
		<div><input type="checkbox" id="check_layer_sue_no_consolidado"> <label for="check_layer_sue_no_consolidado">Sue No Consolidado</label></div>
		<div><input type="checkbox" id="check_layer_sue_congelado"> <label for="check_layer_sue_congelado">Sue Congelado</label></div>
		<div><input type="checkbox" id="check_layer_sue_consolidado"> <label for="check_layer_sue_consolidado">Sue Consolidado</label></div>
		<div><input type="checkbox" id="check_layer_veg_arborea"> <label for="check_layer_veg_arborea">Veg Arborea</label></div>
		<div><input type="checkbox" id="check_layer_veg_arbustiva"> <label for="check_layer_veg_arbustiva">Veg Arbustiva</label></div>
		<div><input type="checkbox" id="check_layer_veg_cultivos"> <label for="check_layer_veg_cultivos">Veg Cultivos</label></div>
		<div><input type="checkbox" id="check_layer_veg_suelo_desnudo"> <label for="check_layer_veg_suelo_desnudo">Veg Suelo Desnudo</label></div>
		<div><input type="checkbox" id="check_layer_vias_secundarias"> <label for="check_layer_vias_secundarias">Vias Secundarias</label></div>
		<div><input type="checkbox" id="check_layer_veg_hidrofila"> <label for="check_layer_veg_hidrofila">Veg Hidrofila</label></div>
		<div><input type="checkbox" id="check_layer_capa_dibujo" checked><label for="check_layer_capa_dibujo">Mis Dibujos</label>
</div>
	</div>

      <h3>Controles</h3>
      <div id="map-interactions" class="mb-3">
        <div><input type="radio" name="controles" id="controles_navegacion" value="navegacion" checked> <label for="controles_navegacion">Navegaci√≥n</label></div>
        <div><input type="radio" name="controles" id="controles_consulta_punto" value="consulta_punto"> <label for="controles_consulta_punto">Consulta Punto</label></div>
        <div><input type="radio" name="controles" id="controles_consulta_rectangulo" value="consulta_rectangulo"> <label for="controles_consulta_rectangulo">Consulta Rect√°ngulo</label></div>
        <div><input type="radio" name="controles" id="controles_medicion_distancia" value="medicion_distancia"> <label for="controles_medicion_distancia">Medici√≥n Distancia</label></div>
        <div><input type="radio" name="controles" id="controles_dibujo_punto" value="dibujo_punto"> <label for="controles_dibujo_punto">Dibujar Punto</label></div>
        <div><input type="radio" name="controles" id="controles_dibujo_linea" value="dibujo_linea"> <label for="controles_dibujo_linea">Dibujar L√≠nea</label></div>
        <div><input type="radio" name="controles" id="controles_dibujo_poligono" value="dibujo_poligono"> <label for="controles_dibujo_poligono">Dibujar Pol√≠gono</label></div>
      </div>

      <div id="drawing-attributes" class="card p-3 mt-3 shadow-sm" style="display: none; background-color: #f8f9fa;">
		<h5 class="card-title text-primary mb-3">
			<i class="bi bi-pencil-square"></i> Nueva Geometr√≠a
		</h5>
		
		<!-- Selector de Capa -->
		<div class="mb-3">
			<label for="draw-layer-select" class="form-label fw-bold">Capa Destino:</label>
			<select id="draw-layer-select" class="form-select">
				<!-- Las opciones se cargan con JS -->
			</select>
		</div>

		<!-- Input de Nombre -->
		<div class="mb-3">
			<label for="feature-name" class="form-label fw-bold">Nombre:</label>
			<input type="text" id="feature-name" class="form-control" placeholder="Ej: Nuevo Punto" autocomplete="off" />
		</div>

		<!-- Botones (en columna ocupando el 100%) -->
		<div class="d-grid gap-2">
			<button id="save-feature-btn" class="btn btn-primary">
				Guardar
			</button>
			<button id="cancel-draw-btn" class="btn btn-danger">
				Cancelar
			</button>
		</div>
</div>

      <h3>Informaci√≥n</h3>
      <div id="map-info" class="small">
        <div id="selected-features-info">&nbsp;</div>
        <div id="measurement-output">&nbsp;</div>
        <div id="scale-info">Escala: 1:</div>
      </div>

      <h3>Leyenda</h3>
      <div id="legend-panel">
        
      </div>
	  <!-- Separador visual para despegarlo de la leyenda -->
      <hr class="mt-4 mb-3" style="opacity: 0.2;">

      <!-- Bot√≥n ancho completo -->
      <button id="btnConsultasMinisterio" class="btn btn-primary w-100 py-2 shadow-sm text-uppercase" style="font-weight:bold; letter-spacing: 0.5px;">
        Consultas Ministerio
      </button>
      
      <!-- Espacio extra abajo para que no pegue al borde final -->
      <div class="mb-4"></div>
    </aside>
  </div>
  
  
 <!-- VENTANA MODAL PARA RESULTADOS -->
<div id="featureModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Resultados de la Consulta</h2>
			<span class="close-modal">&times;</span>
        </div>
        <div id="modalBody" class="modal-body">
            <!-- Aqu√≠ se inyectar√° la tabla din√°micamente -->
        </div>
    </div>
</div>

<!-- MODAL DE CONSULTAS ESPEC√çFICAS -->
<div id="modalConsultas" class="modal">
    <div class="modal-content" style="height: auto; max-height: 90vh;">
        <div class="modal-header">
            <h2>CONSULTAS</h2>
            <span class="close-modal" id="closeModalConsultas">&times;</span>
        </div>
        <div class="modal-body">
            <p style="font-size: 1.1em; color: #555;">
                El Ministerio de Planificaci√≥n de la Naci√≥n pretende realizar obras de mantenimiento en la traza de la 
                <strong>Ruta Nacional 11</strong> correspondiente la <strong>Provincia del Chaco</strong>.
                Se requiere la siguiente informaci√≥n:
            </p>
            
            <label for="selectPregunta" style="font-weight:bold; margin-top:10px;">Seleccione un requerimiento:</label>
            <select id="selectPregunta" class="form-select" style="margin-top: 5px; margin-bottom: 20px;">
                <option value="" selected disabled>-- Seleccione una opci√≥n --</option>
                <option value="1">1. ¬øCu√°ntos km tiene la traza de dicha ruta en la provincia?</option>
                <option value="2">2. Poblaci√≥n afectada directa (hasta 10km)</option>
                <option value="3">3. Poblaci√≥n afectada directa (entre 10 y 20km)</option>
                <option value="4">4. ¬øCu√°ntos y cu√°les puentes cruzan la traza?</option>
            </select>

            <!-- √Årea de Resultados -->
            <div id="resultadoConsulta" style="padding: 20px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 5px; min-height: 100px; display:none;">
                <!-- Aqu√≠ aparecer√° la respuesta -->
            </div>
        </div>
    </div>
</div>

  <!-- Footer -->
  <footer>
    Proyecto: Visor Geoespacial Provincial | Grupo 6: Desza Joaquin, Garay Maria Sol, G√≥mez Christian, Medina Mariano, Saez Juliana
  </footer>
 

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="map.js" type="module"></script>

  <!-- Script para plegar el panel -->
  <script>
    const panel = document.getElementById("sidePanel");
    const toggleBtn = document.getElementById("togglePanelBtn");
    toggleBtn.addEventListener("click", () => {
      panel.classList.toggle("hidden");
    });
  </script>
</body>

</html>
